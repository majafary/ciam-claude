# ============================================================================
# CIAM Backend Environment Configuration
# ============================================================================
# Copy this file to .env and customize for your environment
#
# IMPORTANT: Never commit .env file to version control
# ============================================================================

# ----------------------------------------------------------------------------
# SERVER CONFIGURATION
# ----------------------------------------------------------------------------
NODE_ENV=development
PORT=8080

# ----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ----------------------------------------------------------------------------
# Feature flag to control database mode
# - true: Use in-memory mock database (default for development/testing)
# - false: Use real PostgreSQL database (production)
USE_MOCK_DB=true

# PostgreSQL Connection (only used when USE_MOCK_DB=false)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ciam_db
DB_USER=ciam_user
DB_PASSWORD=ciam_password

# SSL Configuration (optional)
# Set to 'true' to enable SSL connections to PostgreSQL
DB_SSL=false

# Connection Pool Configuration
# Minimum number of connections in the pool
DB_POOL_MIN=10

# Maximum number of connections in the pool
# Adjust based on your database server capacity and expected load
DB_POOL_MAX=50

# Connection timeout in milliseconds (default: 10 seconds)
DB_CONNECTION_TIMEOUT=10000

# Idle connection timeout in milliseconds (default: 30 seconds)
# Connections idle for this duration will be removed from the pool
DB_IDLE_TIMEOUT=30000

# Statement timeout in milliseconds (default: 30 seconds)
# Maximum time a SQL statement can run before being cancelled
DB_STATEMENT_TIMEOUT=30000

# ----------------------------------------------------------------------------
# JWT CONFIGURATION
# ----------------------------------------------------------------------------
# JWT signing secret - CHANGE THIS IN PRODUCTION
JWT_SECRET=your-secret-key-change-this-in-production

# JWT issuer
JWT_ISSUER=ciam-backend

# JWT audience
JWT_AUDIENCE=ciam-client

# Access token expiration (in seconds)
JWT_ACCESS_TOKEN_EXPIRY=900

# ID token expiration (in seconds)
JWT_ID_TOKEN_EXPIRY=900

# Refresh token expiration (in seconds)
JWT_REFRESH_TOKEN_EXPIRY=1209600

# ----------------------------------------------------------------------------
# SESSION CONFIGURATION
# ----------------------------------------------------------------------------
# Session expiration (in seconds)
SESSION_EXPIRY=86400

# ----------------------------------------------------------------------------
# MFA CONFIGURATION
# ----------------------------------------------------------------------------
# MFA transaction expiration (in seconds)
MFA_TRANSACTION_EXPIRY=120

# ----------------------------------------------------------------------------
# DEVICE TRUST CONFIGURATION
# ----------------------------------------------------------------------------
# Trusted device expiration (in days)
TRUSTED_DEVICE_EXPIRY_DAYS=90

# ----------------------------------------------------------------------------
# DRS (Device Risk Service) CONFIGURATION
# ----------------------------------------------------------------------------
# DRS evaluation expiration (in seconds)
DRS_EVALUATION_EXPIRY=300

# ----------------------------------------------------------------------------
# CORS CONFIGURATION
# ----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:3001,http://localhost:3002

# ----------------------------------------------------------------------------
# LOGGING CONFIGURATION
# ----------------------------------------------------------------------------
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Enable query logging (useful for development)
LOG_QUERIES=false

# ----------------------------------------------------------------------------
# SECURITY CONFIGURATION
# ----------------------------------------------------------------------------
# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ----------------------------------------------------------------------------
# FEATURE FLAGS
# ----------------------------------------------------------------------------
# Enable audit logging
ENABLE_AUDIT_LOGS=true

# Enable DRS integration
ENABLE_DRS=true

# Enable device binding
ENABLE_DEVICE_BINDING=true
